<%- content_for( :home_active ) { "active" } %>
<%- content_for( :header_title ) { "Vink" } %>
<%- content_for( :footer ) {  } %>
<%- content_for( :header_menu_left ) { } %>
<%- content_for( :header_menu_rught ) { } %>

<h1>Home#index</h1>
<% @data.each do |name| %>
  <p style="margin-bottom: 2px;">
    <%unless name["children"].empty? %>
      despliega
      <%= link_to "#{name['name']}", "#", class: "button is-dark" %>
    <% else %>
      <%= link_to "#{name['name']}", "#", class: "button is-dark" %>
    <% end %>
  </p>

  <% name['children'].each do |subname| %>
    <p>second
      <%= subname['name']%>
    </p>
    <% subname['children'].each do |minimalname| %>
      <p>third
        <%= minimalname['name']%>
        <span>
        <%= minimalname['id']%>
      </p>
    <%end%>
  <%end%>
<%end%>
<p>Find me in app/views/home/index.html.erb</p>
<video id="preview" width="100" height="150"></video>

<div class="map">

</div>
<div class="preview" width="100" height="100"></div>
<button type="button" name="button" id="buttonBack" class="btn btn-success">Camara trasera</button>
<script type="text/javascript">
    var scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
    scanner.addListener('scan', function (content) {
      alert(content);
    });
    Instascan.Camera.getCameras().then(function (cameras) {
      if (cameras.length > 0) {
        scanner.start(cameras[0]);
        if (cameras.length > 1) {
          document.getElementById("buttonBack").addEventListener('click', function(){
            scanner.start(cameras[1])
          })
        }
      } else {
        console.error('No cameras found.');
      }
    }).catch(function (e) {
      console.error(e);
    });
</script>
